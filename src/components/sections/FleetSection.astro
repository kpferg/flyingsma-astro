---
import { getContentfulFleet } from '../../lib/contentful';

interface Props {
  title?: string;
  description?: string;
}

const {
  title = 'Our Fleet',
  description = 'We maintain a diverse fleet of well-equipped aircraft for all your training needs.'
} = Astro.props;

// Fetch fleet from Contentful
const fleet = await getContentfulFleet();
---

<section class="py-16 bg-gray-50" id="fleet">
  <div class="container mx-auto px-4">
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">{title}</h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto">{description}</p>
    </div>

    {fleet.length > 0 ? (
      <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {fleet.map((aircraft) => (
          <div class="bg-white rounded-xl shadow-lg overflow-hidden group hover:shadow-xl transition-all duration-300">
            <div class="relative h-56 overflow-hidden">
              <img
                src={aircraft.image}
                alt={aircraft.title}
                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                loading="lazy"
              />
              {aircraft.image2 && (
                <img
                  src={aircraft.image2}
                  alt={`${aircraft.title} - alternate view`}
                  class="absolute inset-0 w-full h-full object-cover opacity-0 group-hover:opacity-100 transition-opacity duration-500"
                  loading="lazy"
                />
              )}
            </div>
            <div class="p-6">
              <h3 class="text-xl font-bold text-gray-900 mb-3">{aircraft.title}</h3>
              <div
                class="text-gray-600 mb-4 prose prose-sm max-w-none"
                set:html={aircraft.descriptionHtml}
              />
              {aircraft.pricing && (
                <div class="pt-4 border-t border-gray-100">
                  <span class="text-sm text-gray-500">Pricing:</span>
                  <span class="ml-2 font-semibold text-blue-600">{aircraft.pricing}</span>
                </div>
              )}
            </div>
          </div>
        ))}
      </div>
    ) : (
      <p class="text-center text-gray-500">Fleet information is being updated. Please check back soon.</p>
    )}
  </div>
</section>
